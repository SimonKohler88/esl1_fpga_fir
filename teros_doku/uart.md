
# Entity: uart 
- **File**: uart.vhdl
- **Title:**  UART Coefficient Loader (Avalon-MM → FIR Coeff Array)
- **File:**  uart.vhd
- **Version:**  1.0
- **Date:**  2025-11-10
- **Brief:**  Nios-II based UART subsystem for receiving 64×16-bit FIR filter coefficients.

## Diagram
![Diagram](uart.svg "Diagram")
## Description


Provides a memory-mapped Avalon-MM slave interface for writing FIR coefficients
into a 64-element register file (`FIR_type_coeffs`), updated via UART.

**Data Flow**
- UART bytes → Nios-II softcore → Avalon-MM writes → `coeff_array`

**FIR Coefficient Storage**
- 64 entries (`FILTER_TAPS`)
- 16-bit signed values
- Addressed via Avalon-MM at word offsets
- Write: `mm_bridge_0_m0_writedata(15 downto 0)`
- Read: returns same value, padded to 32-bit word

**Avalon-MM Interface Rules**
- No wait cycles (`waitrequest = '0'`)
- Writes are synchronous
- Reads assert `readdatavalid` for one cycle
- Address width: 10 bits (word address = addr(9 downto 2))

**PIO Interface**
- `pio_data_out[7:0]` outputs debug and status
- Example: MSB = alive bit, others = LSB of coefficient 0

**Subsystem**
- Includes autogenerated `uart_nios` Qsys/Platform Designer soft system
- Contains:
* Nios-II CPU
* UART peripheral
* MM bridge
* PLL & clock bridges
* PIO for debugging

**Usage**
- Host sends coefficients via UART to Nios-II
- CPU converts bytes → words → writes into `coeff_array`
- Entire FIR filter updates at runtime without FPGA reconfiguration

## Ports

| Port name    | Direction | Type                          | Description                 |
| ------------ | --------- | ----------------------------- | --------------------------- |
| clk          | in        | STD_LOGIC                     | System clock                |
| reset_n      | in        | STD_LOGIC                     | Active-low reset            |
| pio_data_out | out       | STD_LOGIC_VECTOR (7 downto 0) | Debug/alive output          |
| FIR_Coeffs   | out       | FIR_type_coeffs               | 64×16-bit coefficient array |
| uart_rxd     | in        | STD_LOGIC                     | UART RX line                |
| uart_txd     | out       | STD_LOGIC                     | UART TX line                |

## Signals

| Name               | Type                          | Description |
| ------------------ | ----------------------------- | ----------- |
| pll_locked         | std_logic                     |             |
| av_mm_wait_req     | std_logic                     |             |
| av_mm_rdata        | std_logic_vector(31 downto 0) |             |
| av_mm_rdata_valid  | std_logic                     |             |
| av_mm_burst_count  | std_logic_vector(0 downto 0)  |             |
| av_mm_wdata        | std_logic_vector(31 downto 0) |             |
| av_mm_addr         | std_logic_vector(9 downto 0)  |             |
| av_mm_wr           | std_logic                     |             |
| av_mm_rd           | std_logic                     |             |
| av_mm_byte_en      | std_logic_vector(3 downto 0)  |             |
| av_mm_debug_access | std_logic                     |             |
| clk_out            | std_logic                     |             |
| pio_int            | std_logic_vector(7 downto 0)  |             |
| coeff_array        | FIR_type_coeffs               |             |

## Processes
- unnamed: ( clk_out, reset_n )

## Instantiations

- u0: uart_nios
